---
title: "Authorization and Authentication"
description: "Learn how to authenticate and authorize requests to the Safe Locker API, including obtaining tokens and managing API keys securely."
mode: "wide"
---

To ensure secure access to the Safe Locker API, each request requires a valid access token obtained via OAuth 2.0. This section covers the steps for authenticating your requests, managing API credentials, and understanding token expiration and refreshing.

***

## Overview

The Safe Locker API employs **OAuth 2.0** as the authentication mechanism, providing secure access to API endpoints. Each request must include an `Authorization` header with a valid token to access resources. This setup allows you to maintain secure connections while managing your API credentials effectively.

***

<AccordionGroup>

<Accordion title="Step 1: Obtain API Credentials">

After setting up your account on the Fez SafeLocker dashboard, follow these steps to obtain your **client ID** and **client secret**:

<Steps>
1. **Log in to the Dashboard**  
   Go to the Fez SafeLocker portal and log in.

2. **Navigate to API Settings**  
   In the settings section, locate **API Settings** or **Developer** options.

3. **Generate Credentials**  
   Click **Create API Key** to generate your client ID and secret. Copy these credentials and store them securely, as they will only be visible once.
</Steps>

<Callout type="warning" title="Important Note">
Treat your credentials as sensitive information. Avoid embedding them in public code repositories or sharing them openly.
</Callout>

</Accordion>

<Accordion title="Step 2: Obtain an Access Token">

With your client ID and secret, request an access token. This token will authenticate all subsequent API calls.

**Token Request Endpoint**: `POST /oauth/token`

<CodeBlock title="Request Example" language="bash">
curl -X POST "https://api.fezsafelocker.com/oauth/token" \
     -H "Content-Type: application/json" \
     -d '{
          "client_id": "your-client-id",
          "client_secret": "your-client-secret",
          "grant_type": "client_credentials"
         }'
</CodeBlock>

**Response Example**:

<CodeBlock title="Response Example" language="json">
{
  "access_token": "your-access-token",
  "token_type": "Bearer",
  "expires_in": 3600
}
</CodeBlock>

<Tabs>
<Tab title="Explanation of Response Fields">
- **access\_token**: The token to be included in the `Authorization` header for subsequent requests.
- **token\_type**: The type of token issued, typically `Bearer`.
- **expires\_in**: The token's expiration time in seconds (e.g., 3600 seconds = 1 hour).
</Tab>
</Tabs>

<Callout type="info" title="Token Expiration">
Access tokens expire after a specified duration (typically 1 hour). Ensure you refresh your token to maintain uninterrupted access.
</Callout>

</Accordion>

<Accordion title="Step 3: Use the Access Token in Requests">

After obtaining an access token, include it in the `Authorization` header for all API requests. This authenticates each call, granting access to resources within your permission scope.

<CodeBlock title="Example Request with Token" language="bash">
curl -X GET "https://api.fezsafelocker.com/lockers/available" \
     -H "Authorization: Bearer your-access-token"
</CodeBlock>

</Accordion>

<Accordion title="Step 4: Refreshing an Expired Token">

Access tokens are temporary and may expire. If using `grant_type: client_credentials`, request a new token when it expires, as there is no refresh token mechanism in this flow.

**Request Example**: Repeat the request in **Step 2** to obtain a new token.

</Accordion>

</AccordionGroup>

***

## API Key Security Best Practices

<Callout title="API Key Security Best Practices" type="tip">
- **Store Keys Securely**: Keep API keys in a secure location, like environment variables or secure vaults.
- **Avoid Public Repositories**: Never expose API keys or tokens in public repositories or hardcode them in your application.
- **Rotate Keys Regularly**: Periodically regenerate your client secret and update your application to use the new credentials.
- **Limit Access**: Restrict API key usage to specific IP addresses or applications where feasible.
</Callout>

***

## Common Errors and Troubleshooting

<AccordionGroup>

<Accordion title="Common Errors">
<Tabs>
<Tab title="401 - Unauthorized">
Unauthorized – Invalid or missing token. Ensure the `Authorization` header includes a valid token.
</Tab>
<Tab title="403 - Forbidden">
Forbidden – Insufficient permissions. Verify your API key permissions or contact support.
</Tab>
<Tab title="429 - Too Many Requests">
Too Many Requests – Rate limit exceeded. Reduce request frequency or contact support for quota details.
</Tab>
</Tabs>
</Accordion>

</AccordionGroup>

***

## Example Authentication Workflow

<CardGroup>
<Card title="1. Generate Credentials" icon="🔑">
Retrieve client ID and secret from the dashboard.
</Card>

<Card title="2. Request Access Token" icon="🔓">
Use the credentials to get an access token.
</Card>

<Card title="3. Make API Calls" icon="🌐">
Include the access token in the `Authorization` header of each request.
</Card>

<Card title="4. Refresh Token" icon="🔄">
Request a new token once the current one expires.
</Card>
</CardGroup>
